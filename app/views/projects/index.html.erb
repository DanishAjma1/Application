<h2><%= (current_user.role).upcase %> is Signed_in Now..</h2>

<% if can? :read, Project %>
  <%= form_with url: search_projects_path, method: :get, local: false, id: "search-form" do %>
    <%= text_field_tag :query, params[:query], placeholder: "Search projects...", id: "search-input" %>
  <% end %>

  <h1>Projects List</h1>
  <div id="projects-list">
    <table>
      <thead>
        <tr>
          <th>Project Title</th>
          <th>Description</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="projects-table-body">
        <%= render partial: "projects/table", locals: { projects: @projects } %>
      </tbody>
    </table>
    <div class="pag-bar mt-5 pt-5 d-flex justify-content-center">
      <%== pagy_bootstrap_nav(@pagy) %>
    </div>
  </div>
  <% if can? :create, Project %>
  <p><%= link_to "New Project", new_project_path %></p>
<% end %>
<% elsif can? :read, Bug %>
  <%= form_with url: search_projects_path, method: :get, local: false, id: "search-form" do %>
    <%= text_field_tag :query, params[:query], placeholder: "Search bugs...", id: "search-input" %>
  <% end %>

  <h1>Bugs List</h1>
  <div id="bugs-list">
    <table>
      <thead>
        <tr>
          <th>Bug Title</th>
          <th>Description</th>
          <th>Priority</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="bugs-table-body">
        <%= render partial: "bugs/table", locals: { bugs: @bugs } %>
      </tbody>
    </table>
    <div class="pag-bar mt-5 pt-5 d-flex justify-content-center">
      <%== pagy_bootstrap_nav(@pagy) %>
    </div>
  </div>
<% end %>
